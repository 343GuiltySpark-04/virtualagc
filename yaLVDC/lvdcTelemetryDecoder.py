#!/usr/bin/env python3
'''
License:    The author (Ronald Burkey) declares this program to be in the 
            Public Domain, usable or modifiable in any way desired.
Filename:   lvdcTelemetryDecoder.py
Purpose:    Parses a "virtual wire" datastream from the yaLVDC CPU 
            emulator, and pulls out just a telemetry datastream.
History:    2023-08-09 RSB  Began.
'''

lvdcMode = None

# List of telemetry PIOs.  The keys are the PIO 9-bit channel numbers, augmented
# by putting the 3-bit mode register (as I understand it) at the top, turning
# the channel numbers into 4 octal digits.  The values are 5-tuples:
#    Variable name
#    Scale (or first scale, if two are specified as in "23/27")
#    Second scale, or -100 if none is specified.
#    Units
#    Description
forAS206RAM = { 
    0o0000: ("TASEC", 15, -100, "SECONDS", "TIME ELAPSED FROM GRR IN SECONDS"),
    0o0001: ("CHIZ", 0, -100, "PIRADS", "YAW GUID. COMM. IN SPACE-FIX. SYS"),
    0o0004: ("ACCZ", 0, -100, ".05 M/SEC", ""),
    0o0005: ("CHIX", 0, -100, "PIRADS", "PITCH GUID COMM. IN SPACE-FIX.SYS"),
    0o0010: ("ACCX", 0, -100, ".05 M/SEC", ""),
    0o0011: ("CHIY", 0, -100, "PIRADS", "ROLL GUID. COMM. IN SPACE-FIX.SYS"),
    0o0014: ("ACCY", 0, -100, ".05 M/SEC", "ACCELEROMETER OPTISYN READINGS"),
    0o0015: ("THETZ", 0, -100, "PIRADS", "WHOLE YAW GIMBAL ANGLE"),
    0o0021: ("THETX", 0, -100, "PIRADS", "WHOLE ROLL GIMBAL ANGLE"),
    0o0025: ("THETY", 0, -100, "PIRADS", "WHOLE PITCH GIMBAL ANGLE"),
    0o0031: ("TB", 15, -100, "SECONDS", "TIME ELAPSED IN CURRENT TIME BASE"),
    0o0034: ("ZS", 23, -100, "METERS", ""),
    0o0044: ("XS", 23, -100, "METERS", ""),
    0o0050: ("YS", 23, -100, "METERS", "COMPONENTS OF SPACE-FIXED POS."),
    0o0054: ("1/R", -22, -100, "1/METERS", "RECIP. OF TOTAL SPACE-FIXED RAD."),
    0o0060: ("GZ", 4, -100, "M/SEC**2", ""),
    0o0064: ("GX", 4, -100, "M/SEC**2", ""),
    0o0070: ("GY", 4, -100, "M/SEC**2", "COMP. OF GRAVITATIONAL ACCEL."),
    0o0110: ("ZDS", 14, -100, "M/SEC", ""),
    0o0114: ("XDS", 14, -100, "M/SEC", ""),
    0o0120: ("YDS", 14, -100, "M/SEC", "COMP. OF SPACE-FIXED VELOCITY"),
    0o0124: ("V", 14, -100, "M/SEC", "TOTAL SPACE-FIXED VELOCITY"),
    0o0174: ("ACCT", 25, -100, "QMS", "REAL TIME CLOCK READING IN QMS"),
    0o0400: ("T1I", 10, -100, "SECONDS", "FIRST IGM PHASE TIME-TO -GO"),
    0o0434: ("Z4", 23, -100, "METERS", ""),
    0o0444: ("X4", 23, -100, "METERS", ""),
    0o0450: ("Y4", 23, -100, "METERS", "POSITIONS IN TARGET PLANE COORD."),
    0o0460: ("T3I", 10, -100, "SECONDS", "TIME-TO-GO IN S4B SECOND BURN"),
    0o0471: ("SQ3", 1, -100, "", "SQRT(1-ZSP**2)"),
    0o0501: ("MLCHIZ", 0, -100, "PIRADS", ""),
    0o0505: ("MLCHIX", 0, -100, "PIRADS", ""),
    0o0511: ("MLCHIY", 0, -100, "PIRADS", "MINOR LOOP CHI'S"),
    0o0544: ("TAUD", 10, -100, "SECONDS", "TIME-TO-GO"),
    0o0561: ("T(I)", 15, -100, "SECONDS", "TIME FROM GRR OF TIME BASE CHANGE"),
    0o1020: ("ZDM", 14, -100, "M/SEC", ""),
    0o1024: ("XDM", 14, -100, "M/SEC", ""),
    0o1030: ("YDM", 14, -100, "M/SEC", "COMPONENTS OF MEASURED VELOCITY"),
    0o1074: ("IGZ", 14, -100, "M/SEC", ""),
    0o1100: ("IGX", 14, -100, "M/SEC", ""),
    0o1104: ("IGY", 14, -100, "M/SEC", "COMP. OF GRAVITATIONAL VELOCITY"),
    0o1130: ("ZDDM", 6, -100, "M/SEC**2", ""),
    0o1134: ("XDDM", 6, -100, "M/SEC**2", ""),
    0o1140: ("YDDM", 6, -100, "M/SEC**2", "COMP. OF MEASURED ACCELERATION"),
    0o1144: ("F/M", 6, -100, "M/SEC**2", "TOTAL MEASURED VELOCITY"),
    0o1445: ("DCHIZ", 0, -100, "PIRADS", ""),
    0o1451: ("DCHIX", 0, -100, "PIRADS", ""),
    0o1455: ("DCHIY", 0, -100, "PIRADS", "CHANGE IN CHI'S PER MINOR LOOP"),
    0o1515: ("RLT1", 25, -100, "", "FIRST -EXTRA- ACCEL. READ"),
    0o1535: ("RLT2", 25, -100, "", "SECOND -EXTRA- ACCEL. READ"),
    0o2150: ("(M/F)I", -2, -100, "SEC**2/M", "RECIPROCAL OF F/M"),
    0o2154: ("(M/F)S", -2, -100, "SEC**2/M", "SMOOTHED VALUE OF (M/F)I"),
    0o2404: ("TAU1", 10, -100, "SECONDS", "FIRST IGM PHASE TOTAL BURN TIME"),
    0o2410: ("TAU3", 10, -100, "SECONDS", "SECOND IGM PHASE TOTAL BURN TIME"),
    0o2414: ("PSI(T)", 0, -100, "PIRADS", "TOTAL RANGE ANGLE"),
    0o2424: ("XV", 23, -100, "METERS", ""),
    0o2430: ("YV", 23, -100, "METERS", "COMP. OF POSITION IN IGM COMP.SYS"),
    0o2434: ("ZDV", 14, -100, "M/SEC", ""),
    0o2444: ("XDV", 14, -100, "M/SEC", ""),
    0o2450: ("YDV", 14, -100, "M/SEC", "COMP. OF VEL. IN IGM COMP. SYS."),
    0o2454: ("DT3IP", 10, -100, "SECONDS", "CORRECTION TO TIME-TO-GO"),
    0o2464: ("DZDV", 14, -100, "M/SEC", ""),
    0o2470: ("DXDV", 14, -100, "M/SEC", ""),
    0o2474: ("DYDV", 14, -100, "M/SEC", "VELOCITIES TO BE GAINED"),
    0o2500: ("CHITZ", 0, -100, "PIRADS", "VEL. CORRECTION IN IGM YAW, GUID."),
    0o2504: ("CHITY", 0, -100, "PIRADS", "VEL. CORRECTION IN IGM PITCH,GUID"),
    0o2510: ("G0", 11, -100, "", "TOTAL Y(V) DISTANCE TO BE GAINED"),
    0o2514: ("N1", 0, -100, "PIRADS", "ALT. CORRECTION IN IGM YAW, GUID."),
    0o2520: ("N2", -8, -100, "PIRADS/SEC", "IDEAL IGM YAW RATE"),
    0o2524: ("GOP", 11, -100, "", "TOTAL X(V) DISTANCE TO BE GAINED"),
    0o2530: ("N3", 0, -100, "PIRADS", "ALT. CORRECTION IN IGM PITCH"),
    0o2534: ("N4", -7, -100, "PIRADS/SEC", "IDEAL IGM PITCH RATE"),
    0o2550: ("CHIZP", 0, -100, "PIRADS", "YAW GUID. COMMAND IN IGM COMP SYS"),
    0o2554: ("CHIYP", 0, -100, "PIRADS", "PITCH GUID. COMMAND, IGM COMP SYS"),
    0o2560: ("SMCZ", 0, -100, "PIRADS", "YAW STEERING MISALIGNMENT"),
    0o2564: ("SMCY", 0, -100, "PIRADS", "PITCH STEERING MISALIGNMENT")
    }
forAS512 = {
    0o0000: ("D.VTAS", 15, -100, "SECONDS", "MISSION TIME AT ACCELEROMETER READ"),
    0o0001: ("D.VGCZ", 0, -100, "PIRADS", "YAW GUIDANCE COMMAND"),
    0o0004: ("V.OACZ", 0, -100, ".05 M/SEC", "Z ACCELEROMETER READING"),
    0o0005: ("D.VGCX", 0, -100, "PIRADS", "ROLL GUIDANCE COMMAND"),
    0o0010: ("V.OACX", 0, -100, ".05 M/SEC", "X ACCELEROMETER READING"),
    0o0011: ("D.VGCY", 0, -100, "PIRADS", "PITCH GUIDANCE COMMAND"),
    0o0014: ("V.OACY", 0, -100, ".05 M/SEC", "Y ACCELEROMETER READING"),
    0o0015: ("V.THZT", 0, -100, "PIRADS", "YAW GIMBAL ANGLE"),
    0o0020: ("D.VIA2", 0, -100, "PIRADS", "ANGLE FROM VERNAL EQUINOX TO LAUNCH MERIDIAN AT GRR"),
    0o0021: ("V.THXT", 0, -100, "PIRADS", "ROLL GIMBAL ANGLE"),
    0o0024: ("D.VIA6", 0, -100, "PIRADS", "ANGLE FROM LONGITUDE OF LAUNCH MERIDIAN TO DESCENDING NODE"),
    0o0025: ("V.THYT", 0, -100, "PIRADS", "PITCH GIMBAL ANGLE"),
    0o0030: ("D.VTBB", 15, -100, "SECONDS", "UPDATED TIME IN CURRENT TIME BASE"),
    0o0031: ("D.VTB", 15, -100, "SECONDS", "TIME IN TIME BASE AT ACCELEROMETER READ"),
    0o0034: ("D.VZS", 23, 27, "METERS", "Z COMPONENT OF SPACE-FIXED POSITION"),
    0o0035: ("V.TD", 15, -100, "SECONDS", "DIFFERENCE IN TIME OF LIFTOFF AND TIME OF LAUNCH WINDOW"),
    0o0041: ("D.VIA7", 0, -100, "PIRADS", "INCLINATION OF PARKING ORBIT"),
    0o0044: ("D.VXS", 23, 27, "METERS", "X COMPONENT OF SPACE-FIXED POSITION"),
    0o0050: ("D.VYS", 23, 27, "METERS", "Y COMPONENT OF SPACE-FIXED POSITION"),
    0o0051: ("D.VTTG", 15, -100, "SECONDS", "TIME-TO-GO TO START OF TIME BASE 6"),
    0o0054: ("D.V1OR", -22, -100, "1/METERS", "RECIPROCAL OF RADIUS"),
    0o0060: ("D.VGZ", 4, -100, "M/SEC**2", "Z COMPONENT OF GRAVITY ACCELERATION"),
    0o0064: ("D.VGX", 4, -100, "M/SEC**2", "X COMPONENT OF GRAVITY ACCELERATION"),
    0o0070: ("D.VGY", 4, -100, "M/SEC**2", "Y COMPONENT OF GRAVITY ACCELERATION"),
    0o0074: ("V.TBA", 15, -100, "SECONDS", "TIME IN TIME BASE OF STATION ACQUISITION GAIN"),
    0o0075: ("V.SSTL", 0, -100, "N/A", "SWITCH SELECTOR FUNCTION INDICATION AT TIME THE READ"),
    0o0100: ("D.VNTM", 15, -100, "SECONDS", "TIME OF EXTRAPOLATION"),
    0o0101: ("V.RSQ1", 0, -100, "", "DIFFERENCE BETWEEN S DOT TP AND COSINE OF ALPHA TS"),
    0o0104: ("D.VDT4", 8, -100, "SECONDS", "DIFFERENCE BETWEEN ACTUAL AND NOMINAL S-IVB CUTOFF"),
    0o0105: ("V.TBL", 15, -100, "SECONDS", "TIME IN TIME BASE OF STATION ACQUISITION LOSS"),
    0o0110: ("D.VZDS", 14, -100, "M/SEC", "Z COMPONENT OF SPACE-FIXED VELOCITY"),
    0o0111: ("V.DC", 0, -100, "PIRADS", "DECLINATION OF 1ST OPPORTUNITY TARGET VECTOR"),
    0o0114: ("D.VXDS", 14, -100, "M/SEC", "X COMPONENT OF SPACE-FIXED VELOCITY"),
    0o0115: ("V.DCB", 0, -100, "PIRADS", "DECLINATION OF 2ND OPPORTUNITY TARGET VECTOR"),
    0o0120: ("D.VYDS", 14, -100, "M/SEC", "Y COMPONENT OF SPACE-FIXED VELOCITY"),
    0o0121: ("D.VALP", 0, -100, "PIRADS", "ANGLE BETWEEN PERIGEE AND THE DESCENDING NODE OF TRANSFER"),
    0o0124: ("D.VVS", 14, -100, "M/SEC", "TOTAL SPACE-FIXED VELOCITY"),
    0o0125: ("V.EN", 0, -100, "", "NOMINAL ECCENTRICITY OF TARGET ELLIPSE FOR 1ST OPPORTUNITY"),
    0o0130: ("D.VGVT", 14, -100, "METERS/SEC", "TERMINAL VELOCITY"),
    0o0131: ("V.ENB", 0, -100, "", "NOMINAL ECCENTRICITY OF TARGET ELLIPSE FOR 2ND OPPORTUNITY"),
    0o0134: ("V.ZS", 23, 27, "METER", "Z EXTRAPOLETED POSITION"),
    0o0141: ("D.VTPZ", 0, -100, "METERS", "Z COMPONENT OF 1ST OPPORTUNITY TARGET VECTOR"),
    0o0144: ("V.XS", 23, 27, "METERS", "X EXTRAPOLETED POSITION"),
    0o0145: ("D.VTPX", 0, -100, "METERS", "X COMPONENT OF 1ST OPPORTUNITY TARGET VECTOR"),
    0o0150: ("V.YS", 23, 27, "METERS", "Y EXTRAPOLATED POSITION"),
    0o0151: ("D.VTPY", 0, -100, "METERS", "Y COMPONENT OF 1ST OPPORTUNITY TARGET VECTOR"),
    0o0154: ("D.VTSZ", 1, -100, "METERS", "Z COMPONENT OF PSEUDONODAL VECTOR S"),
    0o0155: ("D.VTSX", 1, -100, "METERS", "X COMPONENT OF PSEUDONODAL VECTOR S"),
    0o0160: ("D.VTSY", 1, -100, "METERS", "Y COMPONENT OF PSEUDONODAL VECTOR S"),
    0o0161: ("V.C3", 26, -100, "M**2/SEC**2", ""),
    0o0164: ("V.C3B", 26, -100, "M**2/SEC**2", "TWICE THE ORBITAL ENERGY FOR 2ND OPPORTUNITY"),
    0o0170: ("V.1ORT", -22, -100, "1/METERS", "RECIPROCAL OF TERMINAL RADIUS"),
    0o0171: ("D.VT2I", 10, -100, "SECONDS", "S-II TIME-TO-GO AFTER EMRC IN TB3 AND S-IVB IGM TIME-TO-GO"),
    0o0174: ("D.VACT", 0, -100, "RTC PULSES", "REAL TIME CLOCK (RTC) READING ASSOCIATED WITH D.VTAS"),
    0o0400: ("D.VT1I", 10, -100, "SECONDS", "S-II IGM TIME-TO-GO BEFORE EMRC"),
    0o0401: ("D.VMC6", 0, -100, "OCT", "MODE CODE 26"),
    0o0404: ("V.VCS", 0, -100, "", "COSINE OF TRUE ANOMALY OF 1ST OPPORTUNITY TARGET VECTOR"),
    0o0405: ("V.CSB", 0, -100, "", "COSINE OF TRUE ANOMALY OF 2ND OPPORTUNITY TARGET VECTOR"),
    0o0410: ("V.RA", 0, -100, "PIRADS", "RIGHT ASCENSION OF 1ST OPPORTUNITY TARGET VECTOR"),
    0o0411: ("V.RAB", 0, -100, "PIRADS", "RIGHT ASCENSION OF 2ND OPPORTUNITY TARGET VECTOR"),
    0o0415: ("V.LOTW", 0, -100, "OCT", "MODE CODE 24 (EB)"),
    0o0420: ("D.VMC7", 0, -100, "OCT", "MODE CODE 27"),
    0o0421: ("D.VMC5", 0, -100, "OCT", "MODE CODE 25"),
    0o0425: ("D.VDOR", 0, -100, "OCT", "DISCRETE OUTPUT REGISTER STATUS WORD"),
    0o0431: ("D.VICR", 0, -100, "OCT", "INTERNAL CONTROL REGISTER STATUS WORD"),
    0o0434: ("V.TLZ4", 23, 27, "METERS", "Z POSITION IN THE TARGET SYSTEM"),
    0o0435: ("V.EMR", 25, -100, "OCT", "ERROR MONITOR REGISTER STATUS WORD (EB)"),
    0o0440: ("V.K5", 13, -100, "M/SEC", "PARAMETER USED IN TERMINAL VELOCITY CALCULATION"),
    0o0441: ("D.VS4B", 0, -100, "OCT", "TB5 AND TB7 SET CONDITIONS"),
    0o0444: ("V.TLX4", 23, 27, "METERS", "X POSITION IN THE TARGET SYSTEM"),
    0o0445: ("V.DINT", 0, -100, "OCT", "DISCRETE INPUT REGISTER STATUS"),
    0o0450: ("V.TLY4", 23, -100, "METERS", "Y POSITION IN THE TARGET SYSTEM"),
    0o0460: ("V.GT17", 10, -100, "SECONDS", "TOTAL TIME TO GO TO S-IVB CUTOFF"),
    0o0464: ("D.VT3I", 10, -100, "SECONDS", ""),
    0o0465: ("D.VDIT", 0, -100, "", "DISCRETE INPUT INDICATION"),
    0o0470: ("T.FAZ", 0, -100, "PIRADS", "PLATFORM AZIMUTH CORRECTED UP TO LIFTOFF - 3 MINUTES"),
    0o0474: ("D.VFAZ", 0, -100, "PIRADS", "FLIGHT AZIMUTH COMPUTED FROM TARGETED DATA"),
    0o0475: ("D.VTB2", 0, -100, "N/A", "INDICATION OF TIME BASE 2 START ON BACKUP"),
    0o0500: ("V.SSFB", 0, -100, "N/A", "SWITCH SELECTOR FEEDBACK IN ERROR"),
    0o0501: ("V.CCZT", 0, -100, "PIRADS", "MINOR LOOP RATE-LIMITED CHI Z"),
    0o0504: ("D.VVZ", 4, -100, "M/SEC2", "Z COMPONENT OF VENTING ACCELERATION"),
    0o0505: ("V.CCXT", 0, -100, "PIRADS", "MINOR LOOP RATE-LIMITED CHI X"),
    0o0510: ("D.VVX", 4, -100, "M/SEC2", "X COMPONENT OF VENTING ACCELERATION"),
    0o0511: ("V.CCYT", 0, -100, "PIRADS", "MINOR LOOP RATE-LIMITED CHI Y"),
    0o0514: ("D.VVY", 4, -100, "M/SEC2", "Y COMPONENT OF VENTING ACCELERATION"),
    0o0515: ("D.TPZB", 0, -100, "METERS", "Z COMPONENT OF 2ND OPPORTUNITY TARGET VECTOR"),
    0o0520: ("D.VDMZ", 4, -100, "M/SEC**2", "Z COMPONENT OF DRAG ACCELERATION"),
    0o0521: ("D.TPXB", 0, -100, "METERS", "X COMPONENT OF 2ND OPPORTUNITY TARGET VECTOR"),
    0o0524: ("D.VDMX", 4, -100, "M/SEC**2", "X COMPONENT OF DRAG ACCELERATION"),
    0o0525: ("D.TPYB", 0, -100, "METERS", "Y COMPONENT OF 2ND OPPORTUNITY TARGET VECTOR"),
    0o0530: ("D.VDMY", 4, -100, "M/SEC**2", "Y COMPONENT OF DRAG ACCELERATION"),
    0o0534: ("V.ALT", 19, -100, "METERS", "VEHICLE ALTITUDE"),
    0o0535: ("D.VER8", 25, -100, "OCT", "EMR ORED DURING EACH ORBITAL NAVIGATION PASS"),
    0o0540: ("V.SIGM", 0, -100, "PIRADS", "TRUE ANOMALY OF TARGET VECTOR TP"),
    0o0541: ("D.VIA1", 0, -100, "PIRADS", "ANGLE BETWEEN PSEUDONODAL VECTOR S AND TARGET VECTOR TP"),
    0o0544: ("T.T3I", 10, -100, "SECONDS", "HIGH SPEED LOOP TIME-TO-GO"),
    0o0550: ("V.TPA", 0, -100, "PIRADS", "TERMINAL PATH ANGLE"),
    0o0551: ("V.CINC", 0, -100, "N/A", "COSINE OF INCLINATION ANGLE"),
    0o0554: ("V.SINC", 0, -100, "N/A", "SINE OF INCLINATION ANGLE"),
    0o0555: ("V.THTN", 0, -100, "PIRADS", "DESCENDING NODE OF TRANSFER ELLIPSE"),
    0o0560: ("D.VECC", 0, -100, "N/A", "ECCENTRICITY OF TRANSFER ELLIPSE"),
    0o0561: ("D.VTI", 15, -100, "SECONDS", "TIME FROM GRR WHEN CURRENT TIME BASE SET"),
    0o0570: ("D.VDGW", 0, -100, "OCT", "DISAGREEMENT BIT ERROR WORD"),
    0o0571: ("K.ETC", 0, -100, "OCT", "END TELEMETRY CYCLE WORD"),
    0o0574: ("D.VIA0", 5, -100, "METERS/SEC**2", "TERMINAL GRAVITY"),
    0o0575: ("V.BTC", 25, -100, "COUNTER", "BEGIN TELEMETRY CYCLE WORD"),
    0o0671: ("V.STAT", 0, -100, "OCT", "SPECIAL STATUS CODE WORD"),
    0o1001: ("D.VVC", 14, -100, "M/SEC", "CHARACTERISTIC VELOCITY FOR IGM PERFORMANCE ADJUSTMENTS"),
    0o1004: ("D.VIA5", 17, -100, "KG SEC**2/M", "MASS COMPUTED AS A FUNCTION OF CHARACTERISTIC VELOCITY FOR"),
    0o1005: ("T.IGKF", 1, -100, "", "RATIO OF CONSTRUCTED THRUST TO NOMINAL THRUST FOR S-II IGM"),
    0o1010: ("V.DVC2", 14, -100, "M/SEC", "CHARACTERISTIC VELOCITY TO BE GAINED DURING S-II STAGE"),
    0o1020: ("D.VZDM", 14, -100, "M/SEC", "Z COMPONENT OF MEASURED VELOCITY"),
    0o1024: ("D.VXDM", 14, -100, "M/SEC", "X COMPONENT OF MEASURED VELOCITY"),
    0o1030: ("D.VYDM", 14, -100, "M/SEC", "Y COMPONENT OF MEASURED VELOCITY"),
    0o1074: ("V.IGZ", 14, -100, "M/SEC", "Z COMPONENT OF GRAVITY VELOCITY"),
    0o1100: ("V.IGX", 14, -100, "M/SEC", "X COMPONENT OF GRAVITY VELOCITY"),
    0o1104: ("V.IGY", 14, -100, "M/SEC", "Y COMPONENT OF GRAVITY VELOCITY"),
    0o1130: ("D.VZDD", 6, -100, "M/SEC**2", "Z COMPONENT OF PLATFORM MEASURED ACCELERATION"),
    0o1134: ("D.VXDD", 6, -100, "M/SEC**2", "X COMPONENT OF PLATFORM MEASURED ACCELERATION"),
    0o1140: ("D.VYDD", 6, -100, "M/SEC**2", "Y COMPONENT OF PLATFORM MEASURED ACCELERATION"),
    0o1144: ("D.VFOM", 6, -100, "M/SEC**2", "TOTAL MEASURED ACCELERATION"),
    0o1425: ("V.DORS", 0, -100, "OCT", "DOR SET/RESET TELEMETRY WORD"),
    0o1445: ("V.DCZT", 0, -100, "PIRADS", "DELTA CHI Z"),
    0o1451: ("V.DCXT", 0, -100, "PIRADS", "DELTA CHI X"),
    0o1455: ("V.DCYT", 0, -100, "PIRADS", "DELTA CHI Y"),
    0o1501: ("V.EARZ", 0, -100, ".05 M/SEC", "EXTRA Z ACCELEROMETER READING"),
    0o1505: ("V.EARX", 0, -100, ".05 M/SEC", "EXTRA X ACCELEROMETER READING"),
    0o1511: ("V.EARY", 0, -100, ".05 M/SEC", "EXTRA Y ACCELEROMETER READING"),
    0o1515: ("V.EART", 0, -100, "RTC PULSES", "REAL TIME CLOCK READING ASSOCIATED WITH EXTRA ACCEL READ"),
    0o2024: ("V.DCHI", 0, -100, "RTC PULSES", "REAL TIME CLOCK READING ASSOCIATED WITH DELTA CHI UPDATING"),
    0o2030: ("V.P4VV", 14, -100, "M/SEC", "TOTAL SPACE-FIXED VELOCITY"),
    0o2031: ("V.P4ZD", 14, -100, "M/SEC", "Z VELOCITY AT PHASE 2 & 4 INITIALIZE"),
    0o2034: ("V.P4XD", 14, -100, "M/SEC", "X VELOCITY AT PHASE 2 & 4 INITIALIZE"),
    0o2035: ("V.P4YD", 14, -100, "M/SEC", "Y VELOCITY AT PHASE 2 & 4 INITIALIZE"),
    0o2040: ("V.P4ZS", 23, 27, "METERS", "Z POSITION AT PHASE 2 & 4 INITIALIZE"),
    0o2041: ("V.P4XS", 23, 27, "METERS", "X POSITION AT PHASE 2 & 4 INITIALIZE"),
    0o2044: ("V.P4YS", 23, 27, "METERS", "Y POSITION AT PHASE 2 & 4 INITIALIZE"),
    0o2045: ("V.P4TM", 15, -100, "SECONDS", "TOTAL TIME WHEN ACCELEROMETER READ LAST"),
    0o2054: ("V.TCI", 10, -100, "SECONDS", "TIME REMAINING IN S-IVB COAST"),
    0o2150: ("D.VMOF", -2, -100, "SEC**2/METER", "RECIPROCAL OF TOTAL ACCELERATION (F/M)"),
    0o2154: ("D.VMFS", -2, -100, "SEC**2/METER", "SMOOTHED VALUE OF (M/F)"),
    0o2175: ("D.VTU2", 10, -100, "SECONDS", ""),
    0o2404: ("V.TU1", 10, -100, "SECONDS", "RATIO OF MASS TO MASS FLOW RATE FOR FIRST PHASE IGM"),
    0o2410: ("V.TU3", 10, -100, "SECONDS", "RATIO OF MASS TO MASS FLOW RATE FOR THIRD PHASE IGM"),
    0o2414: ("V.GT20", 0, -100, "PIRADS", "TERMINAL RANGE ANGLE"),
    0o2424: ("V.GT22", 23, -100, "METERS", "X POSITION COMPONENT IN INJECTION CO-ORDINATE SYSTEM"),
    0o2434: ("V.GT19", 14, -100, "METERS/SEC", "Z VELOCITY COMPONENT IN INJECTION CO-ORDINATE SYSTEM"),
    0o2444: ("V.GT24", 14, -100, "METERS/SEC", "X VELOCITY COMPONENT IN INJECTION CO-ORDINATE SYSTEM"),
    0o2450: ("V.GT5", 14, -100, "METERS/SEC", "Y VELOCITY COMPONENT IN INJECTION CO-ORDINATE SYSTEM"),
    0o2454: ("V.GT21", 10, -100, "SECONDS", "CORRECTION TO IGM TIME-TO-GO (D.VT3I)"),
    0o2464: ("V.GT31", 14, -100, "METERS/SEC", "Z VELOCITY TO BE GAINED IN INJECTION SYSTEM"),
    0o2470: ("V.GT29", 14, -100, "METERS/SEC", "X VELOCITY TO BE GAINED IN INJECTION SYSTEM"),
    0o2474: ("V.GT30", 14, -100, "METERS/SEC", "Y VELOCITY TO BE GAINED IN INJECTION SYSTEM"),
    0o2500: ("V.GT7", 0, -100, "PIRADS", "VELOCITY CORRECTION IN YAW GUIDANCE ANGLE"),
    0o2504: ("V.GT8", 0, -100, "PIRADS", "VELOCITY CORRECTION IN PITCH GUIDANCE ANGLE"),
    0o2510: ("V.DYV", 23, -100, "METERS", "TOTAL Y (V) DISTANCE TO BE GAINED"),
    0o2514: ("V.GT10", 1, -100, "RADIANS", "ALTITUDE CORRECTION IN IGM PITCH GUIDANCE"),
    0o2520: ("V.GT11", -1, -100, "RADIANS/SEC", "IGM PITCH RATE CORRECTION"),
    0o2524: ("V.GT23", 24, -100, "METERS", "TOTAL X (V) DISTANCE TO BE GAINED"),
    0o2530: ("V.K3", 1, -100, "RADIANS", "ALTITUDE CORRECTION IN IGM YAW GUIDANCE ANGLE"),
    0o2534: ("V.GT12", -2, -100, "RADIANS/SEC", "IGM YAW RATE CORRECTION"),
    0o2550: ("V.GT2", 0, -100, "PIRADS", "YAW GUIDANCE COMMAND IN TARGET PLANE SYSTEM"),
    0o2554: ("V.GT1", 0, -100, "PIRADS", "PITCH GUIDANCE COMMAND IN TARGET PLANE SYSTEM"),
    0o2560: ("D.VSCZ", 0, -100, "PIRADS", "YAW STEERING MISALIGNMENT CORRECTION"),
    0o2564: ("D.VSCY", 0, -100, "PIRADS", "PITCH STEERING MISALIGNMENT CORRECTION"),
    0o4030: ("V.DSST", 0, -100, "N/A", "DCS MODE STATUS WORD"),
    0o4055: ("V.DSER", 0, -100, "N/A", "DCS ERROR WORD"),
    0o4111: ("V.DS11", 0, -100, "N/A", "SINGLE WORD HEADER"),
    0o4115: ("V.DS15", 0, -100, "N/A", "SINGLE WORD VALUE"),
    0o4470: ("V.DDTL", 0, -100, "N/A", "HEADER WORD/SECTOR DUMP"),
    0o4574: ("V.DSDT", 0, -100, "N/A", "DCS DATA STATUS WORD")
    }
forAS513 = {
    0o0000: ("D.VTAS", 15, -100, "SECONDS", "MISSION TIME AT ACCELEROMETER READ"),
    0o0001: ("D.VGCZ", 0, -100, "PIRADS", "YAW GUIDANCE COMMAND"),
    0o0004: ("V.OACZ", 0, -100, ".05 M/SEC", "Z ACCELEROMETER READING"),
    0o0005: ("D.VGCX", 0, -100, "PIRADS", "ROLL GUIDANCE COMMAND"),
    0o0010: ("V.OACX", 0, -100, ".05 M/SEC", "X ACCELEROMETER READING"),
    0o0011: ("D.VGCY", 0, -100, "PIRADS", "PITCH GUIDANCE COMMAND"),
    0o0014: ("V.OACY", 0, -100, ".05 M/SEC", "Y ACCELEROMETER READING"),
    0o0015: ("V.THZT", 0, -100, "PIRADS", "YAW GIMBAL ANGLE"),
    0o0021: ("V.THXT", 0, -100, "PIRADS", "ROLL GIMBAL ANGLE"),
    0o0025: ("V.THYT", 0, -100, "PIRADS", "PITCH GIMBAL ANGLE"),
    0o0030: ("D.VTBB", 15, -100, "SECONDS", "UPDATED TIME IN CURRENT TIME BASE"),
    0o0031: ("D.VTB", 15, -100, "SECONDS", "TIME IN TIME BASE AT ACCELEROMETER READ"),
    0o0034: ("D.VZS", 23, 27, "METERS", "Z COMPONENT OF SPACE-FIXED POSITION"),
    0o0044: ("D.VXS", 23, 27, "METERS", "X COMPONENT OF SPACE-FIXED POSITION"),
    0o0050: ("D.VYS", 23, 27, "METERS", "Y COMPONENT OF SPACE-FIXED POSITION"),
    0o0054: ("D.V1OR", -22, -100, "1/METERS", "RECIPROCAL OF RADIUS"),
    0o0060: ("D.VGZ", 4, -100, "M/SEC**2", "Z COMPONENT OF GRAVITY ACCELERATION"),
    0o0064: ("D.VGX", 4, -100, "M/SEC**2", "X COMPONENT OF GRAVITY ACCELERATION"),
    0o0070: ("D.VGY", 4, -100, "M/SEC**2", "Y COMPONENT OF GRAVITY ACCELERATION"),
    0o0074: ("V.TBA", 15, -100, "SECONDS", "TIME IN TIME BASE OF STATION ACQUISITION GAIN"),
    0o0075: ("V.SSTL", 0, -100, "N/A", "SWITCH SELECTOR FUNCTION INDICATION AT TIME THE READ"),
    0o0100: ("D.VNTM", 15, -100, "SECONDS", "TIME OF EXTRAPOLATION"),
    0o0105: ("V.TBL", 15, -100, "SECONDS", "TIME IN TIME BASE OF STATION ACQUISITION LOSS"),
    0o0110: ("D.VZDS", 14, -100, "M/SEC", ""),
    0o0111: ("V.DC", 0, -100, "PIRADS", "DECLINATION OF 1ST OPPORTUNITY TARGET VECTOR"),
    0o0114: ("D.VXDS", 14, -100, "M/SEC", "X COMPONENT OF SPACE-FIXED VELOCITY"),
    0o0120: ("D.VYDS", 14, -100, "M/SEC", "Y COMPONENT OF SPACE-FIXED VELOCITY"),
    0o0124: ("D.VVS", 14, -100, "M/SEC", "TOTAL SPACE-FIXED VELOCITY"),
    0o0134: ("V.ZS", 23, 27, "METER", "Z EXTRAPOLETED POSITION"),
    0o0144: ("V.XS", 23, 27, "METERS", "X EXTRAPOLETED POSITION"),
    0o0150: ("V.YS", 23, 27, "METERS", "Y EXTRAPOLATED POSITION"),
    0o0171: ("D.VT2I", 10, -100, "SECONDS", "TIME-TO-GO TO IGM PHASE 3"),
    0o0174: ("D.VACT", 0, -100, "RTC PULSES", "REAL TIME CLOCK (RTC) READING ASSOCIATED WITH D.VTAS"),
    0o0400: ("D.VT1I", 10, -100, "SECONDS", "TIME-TO-GO TO IGM PHASE 2"),
    0o0415: ("V.LOTW", 0, -100, "OCT", "MODE CODE 24 (EB)"),
    0o0420: ("D.VMC7", 0, -100, "OCT", "MODE CODE 27"),
    0o0421: ("D.VMC5", 0, -100, "OCT", "MODE CODE 25"),
    0o0425: ("D.VDOR", 0, -100, "OCT", "DISCRETE OUTPUT REGISTER STATUS WORD"),
    0o0431: ("D.VICR", 0, -100, "OCT", "INTERNAL CONTROL REGISTER STATUS WORD"),
    0o0434: ("V.TLZ4", 23, 27, "METERS", "Z POSITION IN THE TARGET SYSTEM"),
    0o0435: ("V.EMR", 25, -100, "OCT", "ERROR MONITOR REGISTER STATUS WORD (EB)"),
    0o0441: ("D.VS4B", 0, -100, "OCT", "TB4 SET CONDITIONS"),
    0o0444: ("V.TLX4", 23, 27, "METERS", "X POSITION IN THE TARGET SYSTEM"),
    0o0445: ("V.DINT", 0, -100, "OCT", "DISCRETE INPUT REGISTER STATUS"),
    0o0450: ("V.TLY4", 23, -100, "METERS", "Y POSITION IN THE TARGET SYSTEM"),
    0o0460: ("V.GT17", 10, -100, "SECONDS", "TOTAL TIME TO GO TO S-II CUTOFF"),
    0o0464: ("D.VT3I", 10, -100, "SECONDS", "TIME-TO-GO IN THIRD PHASE OF IGM"),
    0o0465: ("D.VDIT", 0, -100, "", "DISCRETE INPUT INDICATION"),
    0o0475: ("D.VTB2", 0, -100, "N/A", "INDICATION OF TIME BASE 2 START ON BACKUP"),
    0o0500: ("V.SSFB", 0, -100, "N/A", "SWITCH SELECTOR FEEDBACK IN ERROR"),
    0o0501: ("V.CCZT", 0, -100, "PIRADS", "MINOR LOOP RATE-LIMITED CHI Z"),
    0o0505: ("V.CCXT", 0, -100, "PIRADS", "MINOR LOOP RATE-LIMITED CHI X"),
    0o0511: ("V.CCYT", 0, -100, "PIRADS", "MINOR LOOP RATE-LIMITED CHI Y"),
    0o0535: ("D.VER8", 25, -100, "OCT", "EMR ORED DURING EACH ORBITAL NAVIGATION PASS"),
    0o0544: ("T.T3I", 10, -100, "SECONDS", "HIGH SPEED LOOP TIME-TO-GO"),
    0o0561: ("D.VTI", 15, -100, "SECONDS", "TIME FROM GRR WHEN CURRENT TIME BASE SET"),
    0o0570: ("D.VDGW", 0, -100, "OCT", "DISAGREEMENT BIT ERROR WORD"),
    0o0571: ("K.ETC", 0, -100, "OCT", "END TELEMETRY CYCLE WORD"),
    0o0575: ("V.BTC", 25, -100, "COUNTER", "BEGIN TELEMETRY CYCLE WORD"),
    0o0671: ("V.STAT", 0, -100, "OCT", "SPECIAL STATUS CODE WORD"),
    0o1001: ("D.VVC", 14, -100, "M/SEC", "CHARACTERISTIC VELOCITY FOR IGM PERFORMANCE ADJUSTMENTS"),
    0o1004: ("D.VIA5", 17, -100, "KG SEC**2/M", "MASS COMPUTED AS A FUNCTION OF CHARACTERISTIC VELOCITY FOR"),
    0o1005: ("T.IGKF", 1, -100, "", "RATIO OF CONSTRUCTED THRUST TO NOMINAL THRUST FOR S-II IGM"),
    0o1010: ("V.DVC2", 14, -100, "M/SEC", "CHARACTERISTIC VELOCITY TO BE GAINED DURING S-II STAGE"),
    0o1020: ("D.VZDM", 14, -100, "M/SEC", "Z COMPONENT OF MEASURED VELOCITY"),
    0o1024: ("D.VXDM", 14, -100, "M/SEC", "X COMPONENT OF MEASURED VELOCITY"),
    0o1030: ("D.VYDM", 14, -100, "M/SEC", "Y COMPONENT OF MEASURED VELOCITY"),
    0o1074: ("V.IGZ", 14, -100, "M/SEC", "Z COMPONENT OF GRAVITY VELOCITY"),
    0o1100: ("V.IGX", 14, -100, "M/SEC", "X COMPONENT OF GRAVITY VELOCITY"),
    0o1104: ("V.IGY", 14, -100, "M/SEC", "Y COMPONENT OF GRAVITY VELOCITY"),
    0o1130: ("D.VZDD", 6, -100, "M/SEC**2", "Z COMPONENT OF PLATFORM MEASURED ACCELERATION"),
    0o1134: ("D.VXDD", 6, -100, "M/SEC**2", "X COMPONENT OF PLATFORM MEASURED ACCELERATION"),
    0o1140: ("D.VYDD", 6, -100, "M/SEC**2", "Y COMPONENT OF PLATFORM MEASURED ACCELERATION"),
    0o1144: ("D.VFOM", 6, -100, "M/SEC**2", "TOTAL MEASURED ACCELERATION"),
    0o1425: ("V.DORS", 0, -100, "OCT", "DOR SET/RESET TELEMETRY WORD"),
    0o1445: ("V.DCZT", 0, -100, "PIRADS", "DELTA CHI Z"),
    0o1451: ("V.DCXT", 0, -100, "PIRADS", "DELTA CHI X"),
    0o1455: ("V.DCYT", 0, -100, "PIRADS", "DELTA CHI Y"),
    0o1501: ("V.EARZ", 0, -100, ".05 M/SEC", "EXTRA Z ACCELEROMETER READING"),
    0o1505: ("V.EARX", 0, -100, ".05 M/SEC", "EXTRA X ACCELEROMETER READING"),
    0o1511: ("V.EARY", 0, -100, ".05 M/SEC", "EXTRA Y ACCELEROMETER READING"),
    0o1515: ("V.EART", 0, -100, "RTC PULSES", "REAL TIME CLOCK READING ASSOCIATED WITH EXTRA ACCEL READ"),
    0o2024: ("V.DCHI", 0, -100, "RTC PULSES", "REAL TIME CLOCK READING ASSOCIATED WITH DELTA CHI UPDATING"),
    0o2150: ("D.VMOF", -2, -100, "SEC**2/METER", "RECIPROCAL OF TOTAL ACCELERATION (F/M)"),
    0o2154: ("D.VMFS", -2, -100, "SEC**2/METER", "SMOOTHED VALUE OF (M/F)"),
    0o2175: ("D.VTU2", 10, -100, "SECONDS", "RATIO OF MASS TO MASS FLOW RATE FOR SECOND PHASE IGM"),
    0o2404: ("V.TU1", 10, -100, "SECONDS", "RATIO OF MASS TO MASS FLOW RATE FOR FIRST PHASE IGM"),
    0o2410: ("V.TU3", 10, -100, "SECONDS", "RATIO OF MASS TO MASS FLOW RATE FOR THIRD PHASE IGM"),
    0o2414: ("V.GT20", 0, -100, "PIRADS", "TERMINAL RANGE ANGLE"),
    0o2424: ("V.GT22", 23, -100, "METERS", "X POSITION COMPONENT IN INJECTION CO-ORDINATE SYSTEM"),
    0o2434: ("V.GT19", 14, -100, "METERS/SEC", "Z VELOCITY COMPONENT IN INJECTION CO-ORDINATE SYSTEM"),
    0o2444: ("V.GT24", 14, -100, "METERS/SEC", ""),
    0o2450: ("V.GT5", 14, -100, "METERS/SEC", "Y VELOCITY COMPONENT IN INJECTION CO-ORDINATE SYSTEM"),
    0o2454: ("V.GT21", 10, -100, "SECONDS", "CORRECTION TO IGM TIME-TO-GO (D.VT3I)"),
    0o2464: ("V.GT31", 14, -100, "METERS/SEC", "Z VELOCITY TO BE GAINED IN INJECTION SYSTEM"),
    0o2470: ("V.GT29", 14, -100, "METERS/SEC", "X VELOCITY TO BE GAINED IN INJECTION SYSTEM"),
    0o2474: ("V.GT30", 14, -100, "METERS/SEC", "Y VELOCITY TO BE GAINED IN INJECTION SYSTEM"),
    0o2500: ("V.GT7", 0, -100, "PIRADS", "VELOCITY CORRECTION IN YAW GUIDANCE ANGLE"),
    0o2504: ("V.GT8", 0, -100, "PIRADS", "VELOCITY CORRECTION IN PITCH GUIDANCE ANGLE"),
    0o2510: ("V.DYV", 23, -100, "METERS", "TOTAL Y (V) DISTANCE TO BE GAINED"),
    0o2514: ("V.GT10", 1, -100, "RADIANS", "ALTITUDE CORRECTION IN IGM PITCH GUIDANCE"),
    0o2520: ("V.GT11", -1, -100, "RADIANS/SEC", "IGM PITCH RATE CORRECTION"),
    0o2524: ("V.GT23", 24, -100, "METERS", "TOTAL X (V) DISTANCE TO BE GAINED"),
    0o2530: ("V.K3", 1, -100, "RADIANS", "ALTITUDE CORRECTION IN IGM YAW GUIDANCE ANGLE"),
    0o2534: ("V.GT12", -2, -100, "RADIANS/SEC", "IGM YAW RATE CORRECTION"),
    0o2550: ("V.GT2", 0, -100, "PIRADS", "YAW GUIDANCE COMMAND IN TARGET PLANE SYSTEM"),
    0o2554: ("V.GT1", 0, -100, "PIRADS", "PITCH GUIDANCE COMMAND IN TARGET PLANE SYSTEM"),
    0o2560: ("D.VSCZ", 0, -100, "PIRADS", "YAW STEERING MISALIGNMENT CORRECTION"),
    0o2564: ("D.VSCY", 0, -100, "PIRADS", "PITCH STEERING MISALIGNMENT CORRECTION"),
    0o4030: ("V.DSST", 0, -100, "N/A", "DCS MODE STATUS WORD"),
    0o4055: ("V.DSER", 0, -100, "N/A", ""),
    0o4470: ("V.DDTL", 0, -100, "N/A", "HEADER WORD/SECTOR DUMP"),
    0o4574: ("V.DSDT", 0, -100, "N/A", "DCS DATA STATUS WORD")
    }

def lvdcModeReset():
    global lvdcMode
    lvdcMode = None

# The input parameters are:
#    version         The applicable LVDC software:
#                        0    PTC ADAPT Self-Test Program
#                        1    AS-206RAM
#                        2    AS-512
#                        3    AS-513
#                        4    AS-206
# Returns a tuple:
#    variableName    Name of the variable being telemetered (from TELD def'n).
#    value           Numerical value.
#    scale1          Scale (or 1st scale, if two are specified)
#    scale2          2nd scale, or -100 if none specified
#    units           A string describing the units, possibly empty
#    description     A string describing the quantity, possibly empty
#    errorMessage    Self-explanatory.  None if none.
# If the packet doesn't hold any telemetered data, then variableName and value
# are returned as None.  If there is no error, then errorMessage is returned
# as None.
defaultReturn = (None, None, None, None, None, None, None)
def lvdcTelemetryDecoder(version, ioType, channelNumber, data):
    global lvdcMode
    if ioType != 0:
        return defaultReturn
    if channelNumber in [0o006, 0o206, 0o406, 0o606]:
        lvdcMode = (data >> 20) & 7
        return defaultReturn
    if version == 0:
        return defaultReturn
    elif version == 1:
        forMission = forAS206RAM
    elif version == 2:
        forMission = forAS512
    elif version == 3:
        forMission = forAS513
    else:
        return None,None,None,None,None,None,"Unknown LVDC software version"
    if lvdcMode == None:
        return defaultReturn
    augmentedPIO = (lvdcMode << 9) | channelNumber
    if augmentedPIO not in forMission:
        return defaultReturn
    teld = forMission[augmentedPIO]
    return teld[0],data,teld[1],teld[2],teld[3],teld[4],None
